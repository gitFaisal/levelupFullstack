{"ast":null,"code":"import _regeneratorRuntime from\"/Users/faisalmalik/Desktop/levelupFullstack/levelup/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/faisalmalik/Desktop/levelupFullstack/levelup/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"/Users/faisalmalik/Desktop/levelupFullstack/levelup/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/faisalmalik/Desktop/levelupFullstack/levelup/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{React,useEffect,useState}from\"react\";import\"./App.css\";import Form from\"./Components/Form\";import Navbar from\"./Components/Navbar\";import SkillsList from\"./Components/SkillsList\";import Logins from\"./Components/Logins\";import About from\"./Components/About\";import Registration from\"./Components/Registration\";import Greeting from\"./Components/Greeting\";import logo from\"./images/yellow_levelup.png\";import{BrowserRouter as Router,Switch,Route,Redirect}from\"react-router-dom\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){// Get Token from local storage -- Need to figure out how to use JWT token for user session\n// const initialToken = localStorage.getItem('token');\n// Using user_id in localStorage to keep user loggedd in\nvar initialUser=localStorage.getItem(\"user_id\");// States\nvar _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),inputText=_useState2[0],setInputText=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),skills=_useState4[0],setSkills=_useState4[1];var _useState5=useState({auth:false,token:\"\",user_id:initialUser,refresh:false}),_useState6=_slicedToArray(_useState5,2),session=_useState6[0],setSession=_useState6[1];// Considering using object deconstruction\nvar refresh=session.refresh;var isLoggedIn=session.user_id?true:false;// call-back function for Logins component - Updates session and refresh invokes useEffect to run\nvar userAuth=function userAuth(data){setSession({auth:true,token:data.token,user_id:data.user_id,refresh:!session.refresh});console.log(\"User logged in successfully!\");};// Resets session state to default, removes user_id from localStorage\nvar logoutHandler=function logoutHandler(){if(isLoggedIn){setSession({auth:false,token:\"\",user_id:\"\"});localStorage.removeItem(\"user_id\");}};var refreshHandler=function refreshHandler(){setSession(_objectSpread(_objectSpread({},session),{},{refresh:!session.refresh}));};useEffect(function(){if(session.user_id){setSession(_objectSpread(_objectSpread({},session),{},{auth:true}));}var fetchSkills=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"http://localhost:3001/api/users/skills?user_id=\".concat(initialUser));case 2:response=_context.sent;setSkills(response.data);case 4:case\"end\":return _context.stop();}}},_callee);}));return function fetchSkills(){return _ref.apply(this,arguments);};}();fetchSkills();},[refresh]);return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(Navbar,{logoutHandler:logoutHandler,session:session}),/*#__PURE__*/_jsxs(Switch,{children:[isLoggedIn&&/*#__PURE__*/_jsx(Route,{path:\"/\",exact:true,children:/*#__PURE__*/_jsxs(\"div\",{className:\"app-container\",children:[/*#__PURE__*/_jsx(\"img\",{id:\"logo\",src:logo,alt:\"LEVEL UP!\"}),/*#__PURE__*/_jsx(Form,{inputText:inputText,setInputText:setInputText,skills:skills,setSkills:setSkills,session:session,setSession:setSession,refreshHandler:refreshHandler}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(SkillsList,{isLoggedIn:isLoggedIn,skills:skills,setSkills:setSkills,session:session,setSession:setSession,refreshHandler:refreshHandler})]})}),!isLoggedIn&&/*#__PURE__*/_jsx(Route,{path:\"/\",exact:true,children:/*#__PURE__*/_jsx(Greeting,{})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",component:Registration}),/*#__PURE__*/_jsx(Route,{path:\"/login\",children:/*#__PURE__*/_jsx(Logins,{userAuth:userAuth})}),/*#__PURE__*/_jsx(Route,{path:\"/about\",exact:true,children:/*#__PURE__*/_jsx(About,{})}),/*#__PURE__*/_jsx(Route,{path:\"*\",children:/*#__PURE__*/_jsx(Redirect,{to:\"/\"})})]})]})});}export default App;","map":{"version":3,"sources":["/Users/faisalmalik/Desktop/levelupFullstack/levelup/src/App.js"],"names":["React","useEffect","useState","Form","Navbar","SkillsList","Logins","About","Registration","Greeting","logo","BrowserRouter","Router","Switch","Route","Redirect","axios","App","initialUser","localStorage","getItem","inputText","setInputText","skills","setSkills","auth","token","user_id","refresh","session","setSession","isLoggedIn","userAuth","data","console","log","logoutHandler","removeItem","refreshHandler","fetchSkills","get","response"],"mappings":"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","sourcesContent":["import { React, useEffect, useState } from \"react\";\nimport \"./App.css\";\nimport Form from \"./Components/Form\";\nimport Navbar from \"./Components/Navbar\";\nimport SkillsList from \"./Components/SkillsList\";\nimport Logins from \"./Components/Logins\";\nimport About from \"./Components/About\";\nimport Registration from \"./Components/Registration\";\nimport Greeting from \"./Components/Greeting\";\nimport logo from \"./images/yellow_levelup.png\";\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Redirect,\n} from \"react-router-dom\";\nimport axios from \"axios\";\n\nfunction App() {\n  // Get Token from local storage -- Need to figure out how to use JWT token for user session\n  // const initialToken = localStorage.getItem('token');\n  // Using user_id in localStorage to keep user loggedd in\n  const initialUser = localStorage.getItem(\"user_id\");\n  // States\n  const [inputText, setInputText] = useState(\"\");\n  const [skills, setSkills] = useState([]);\n  const [session, setSession] = useState({\n    auth: false,\n    token: \"\",\n    user_id: initialUser,\n    refresh: false,\n  });\n\n  // Considering using object deconstruction\n  var refresh = session.refresh;\n  var isLoggedIn = session.user_id ? true : false;\n\n  // call-back function for Logins component - Updates session and refresh invokes useEffect to run\n  const userAuth = (data) => {\n    setSession({\n      auth: true,\n      token: data.token,\n      user_id: data.user_id,\n      refresh: !session.refresh,\n    });\n    console.log(\"User logged in successfully!\");\n  };\n\n  // Resets session state to default, removes user_id from localStorage\n  const logoutHandler = () => {\n    if (isLoggedIn) {\n      setSession({ auth: false, token: \"\", user_id: \"\" });\n      localStorage.removeItem(\"user_id\");\n    }\n  };\n\n  const refreshHandler = () => {\n    setSession({ ...session, refresh: !session.refresh });\n  };\n\n  useEffect(() => {\n    if (session.user_id) {\n      setSession({ ...session, auth: true });\n    }\n    const fetchSkills = async () => {\n      const response = await axios.get(\n        `http://localhost:3001/api/users/skills?user_id=${initialUser}`\n      );\n      setSkills(response.data);\n    };\n    fetchSkills();\n  }, [refresh]);\n\n  return (\n    <Router>\n      <div className=\"App\">\n        <Navbar logoutHandler={logoutHandler} session={session} />\n\n        <Switch>\n          {isLoggedIn && (\n            <Route path=\"/\" exact>\n              <div className=\"app-container\">\n                <img id=\"logo\" src={logo} alt=\"LEVEL UP!\" />\n\n                <Form\n                  inputText={inputText}\n                  setInputText={setInputText}\n                  skills={skills}\n                  setSkills={setSkills}\n                  session={session}\n                  setSession={setSession}\n                  refreshHandler={refreshHandler}\n                />\n                <br />\n                <SkillsList\n                  isLoggedIn={isLoggedIn}\n                  skills={skills}\n                  setSkills={setSkills}\n                  session={session}\n                  setSession={setSession}\n                  refreshHandler={refreshHandler}\n                />\n              </div>\n            </Route>\n          )}\n          {!isLoggedIn && (\n            <Route path=\"/\" exact>\n              <Greeting />\n            </Route>\n          )}\n          <Route path=\"/register\" component={Registration} />\n          <Route path=\"/login\">\n            <Logins userAuth={userAuth} />\n          </Route>\n          <Route path=\"/about\" exact>\n            <About />\n          </Route>\n          <Route path=\"*\">\n            <Redirect to=\"/\" />\n          </Route>\n        </Switch>\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}